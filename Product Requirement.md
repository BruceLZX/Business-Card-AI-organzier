# BusinessCardAIAssisstant — 产品需求说明（中文）

本文件是产品行为的唯一权威规格（source of truth）。

---

## 0) 适用范围
- 联系人/公司档案结构与交互
- 创建流程（扫描/手动）
- 目录（名录）
- AI 补全、Tag 与语言显示规则
- 问题列表、解决方案与执行清单

---

## 1) 术语
- **本名**：对象的原始语言名称（Original Name）。
- **译名**：由 AI 翻译补齐的名称。
- **档案**：联系人或公司的一条结构化记录。
- **补全**：AI Enrichment（含多阶段搜索/合并/输出）。

---

## 2) 全局规则

### 2.1 系统语言与显示
- 默认按系统语言显示。
- 若目标语言缺失：先显示已有语言，后台补齐翻译（用户始终可见）。
- **姓名/公司名显示规则**：
  - 系统语言与单语言姓名一致：只显示该名字。
  - 系统语言与单语言姓名不一致：显示“译名（主）+ 原名（辅）”。
  - 译名在创建新文档时由 AI 翻译补齐。

### 2.2 不翻译字段
- 地址、网址、邮箱、电话、编号/代码、微信号、Tag。

### 2.3 Tag 规则
- Tag 不翻译；生成时按系统语言输出（专有名词可保留原文）。
- Tag 必须为单词（无空格/标点）；手动新增允许空格/标点。
- Tag 必须优先从 tag pool 匹配；未命中才新建。

### 2.4 错误提示
- 所有错误提示需中英文版本，显示按系统语言。

---

## 3) 联系人档案页（Detail）

### 3.1 页面结构
- 顶部识别区：姓名按系统语言显示，必要时显示原名辅助。
- 语言切换：右上角 EN/中文分段开关，仅影响当前页面。
- 职位、公司名称（可跳转公司详情）。
- AI 总结模块：未触发前显示占位文案；触发后显示 AI summary。
- 联系信息：电话/邮箱/微信/网站/LinkedIn（可点击）。
- 公司关联：关联公司列表 + “关联新公司”（仅选择已有）。
- 备注模块。
- 标签模块（Tag 不翻译）。
- 照片模块（可全屏浏览）。
- 底部操作：删除联系人档案（红色按钮）。

### 3.2 关键交互
1. 编辑单一模块（关联模块除外）。
2. AI 更新字段显示蓝色；退出重进或编辑保存后清除高亮。
3. 每个被替换字段提供“撤销替换”。
4. AI 补全完成后页面需立即更新（无需退出重进）。
5. 备注不允许 AI 写入。
6. 微信号存在时，提供“打开微信检索”；点击后先复制，再提示是否跳转微信。

### 3.3 照片交互
- 缩略图列表 + 点击全屏浏览。
- 全屏支持左右切换、返回。
- 可删除。
- 上限 10 张。

---

## 4) 公司档案页（Detail）

### 4.1 页面结构
- 顶部识别区：公司名称按系统语言显示，必要时显示原名辅助。
- 语言切换：右上角 EN/中文分段开关，仅影响当前页面。
- 公司简介、行业。
- AI 总结模块。
- 公司基础信息：规模/营收/成立时间/总部/地址/电话。
- 业务模块：服务类型/服务对象/市场区域。
- 链接模块：官网/公司邮箱/LinkedIn（可点击）。
- 关联联系人列表 + “关联新联系人”（仅选择已有）。
- 备注、标签、照片。
- 底部操作：删除公司档案。

### 4.2 关键交互
1. AI summary 不得重复“公司基础信息”，需提供产品/功能/参数/竞品/优缺点/融资/合作/定位等补充信息（有信息时）。
2. AI 更新字段显示蓝色；退出重进或编辑保存后清除高亮。
3. 每个被替换字段提供“撤销替换”。
4. AI 补全完成后页面需立即更新。
5. 备注不允许 AI 写入。

### 4.3 照片交互
- 上限 20 张。
- 缩略图区固定高度，可上下滚动。
- 点击进入全屏浏览，支持左右切换/返回。

---

## 5) 关联模块（通用规范）
1. 关联对象列表支持滚动（固定高度约 3 个对象高度）。
2. “关联新 / 删除关联”按钮固定在列表底部。
3. 删除关联为红色危险样式。
4. 支持多选删除并二次确认。

---

## 6) 创建流程（原“拍照页”）

### 6.1 基本规则
1. 页面名称为“创建”。
2. 最近创建列表按系统语言显示名称与副标题。
3. 点击底部 Tab 必须回到各自根页面（创建/名录/设置）。
4. 最近创建列表支持长按删除（需二次确认）。
5. 创建完成后自动生成 Tag（失败不阻断保存）。
6. 扫描创建：优先视觉解析，多图；失败才用 OCR 文本兜底。
7. Name = 本名；Original Name = 原始语言名称。
8. 单语言姓名识别时，创建阶段自动补齐译名（不覆盖手动输入）。
9. 支持二维码信息提取，用于预填与 AI 补全上下文。

### 6.2 添加模式（照片池）
1. 点击“添加”进入添加模式，先显示照片池。
2. 池子下方提供“拍照/相册”按钮。
3. 相册支持一次多选；选完不自动创建，需点击“确认/开始创建”。
4. 添加模式照片上限 10 张。

### 6.3 手动创建
- 不显示“选择已有”按钮。
- 输入名称后做模糊匹配，弹窗提示“跳转已有档案/继续创建”。

---

## 7) 目录（名录）
1. 列表按系统语言显示联系人/公司名称。
2. 若目标语言缺失，回退显示已有语言并后台补齐。
3. Tag 在列表中显示时不翻译。
4. 列表项支持长按删除（需二次确认）。
5. 搜索与筛选：位置/服务类型/服务对象/标签/市场区域。

---

## 8) AI 补全

### 8.1 入口与交互
- 入口在档案顶部；点击后显示进度条。
- 补全过程中禁止编辑与关键按钮操作（允许离开页面/切换 Tab）。
- 进度条只在阶段完成后推进（非伪进度）。
- 不显示屏幕中央浮层进度条。

### 8.2 阶段与搜索策略
1. 照片内容分析（mini 模型）。
2. 联网搜索（thinking 模型，多阶段）。
3. 合并去重与输出。
4. 若识别为中国人/公司（中文内容、地址/域名/地点等），优先中文互联网搜索。

### 8.3 输出与对比
- 更新字段显示蓝色。
- 若字段被更新，显示原值用于对比。
- 若原字段非空，每个被替换字段下方都提供“撤销替换”。

### 8.4 质量与安全
- 对照现有信息校验，避免同名误入。
- 不确定内容用【可能不准确】标记到字段/段落级。
- 优先基于官网/LinkedIn/个人站点/二维码链接搜索。
- **Summary 要求**：
  - 面向潜在客户/投资人/合作方视角。
  - 有信息时必须包含产品/功能/参数/竞品/优缺点/融资/合作/定位。
  - 禁止复述“公司基础字段”。
- 若网络无结果但图片/已知信息存在，Summary 必须基于图像/已知信息生成。
- 备注不允许 AI 写入。

### 8.5 Tag 生成
- 使用 mini 模型。
- Tag 按系统语言生成（专有名词保留原文）。
- 先从 tag pool 匹配；未命中才新建。
- 创建时也应生成 Tag。

### 8.6 不确定标记规则
- 仅当 AI 填写不确定信息时写入【可能不准确】。
- 黄标仅在“本次更新且字段包含【可能不准确】”时显示；保存或退出后消失。

---

## 9) 语言与翻译策略（工程约束）
1. 翻译触发：创建/编辑保存/AI 补全完成后后台翻译；打开详情页缺失时补齐。
2. 翻译结果缓存本地，字段变更才重新翻译。
3. Tag 不翻译，仅按生成语言显示。
4. 英文人名翻译为中文时使用音译，不生成“中文名”。
5. 微信号与邮箱不翻译。

---

## 10) 问题列表（当前）
1. 英文公司名在中文系统下未显示“中文译名 + 英文原名”。
2. AI Summary 内容过短且重复档案字段，未体现产品/功能/参数/竞品/优缺点等。
3. AI 补全后旧 Tag 丢失或重复。
4. “可能不准确”提示重复且不消失。
5. AI 写入备注内容（不允许）。
6. 创建页添加流程缺乏“相机/相册”双入口与多选确认。
7. 添加模式照片池交互与视觉层级不清晰。
8. 手动创建出现“选择已有”按钮，应改为名称输入后弹窗提示。
9. 联系人缺少微信字段与微信检索入口；公司缺少邮箱字段。
10. 未利用二维码内容作为预填与补全线索。

---

## 11) 解决方案与逻辑（工程视角）
1. **双语名称显示**：系统语言一致时仅显示单名；不一致时显示“译名 + 原名”（译名创建时 AI 补齐）。
2. **Summary 内容深化**：强化 prompt，要求只输出新增信息并覆盖商业模式/定位/竞品/优缺点/参数等维度。
3. **Tag 合并策略**：AI 只新增，不删除旧 Tag；大小写归一、去重合并。
4. **不确定提示清理**：仅在 AI 写入不确定信息时标记，退出/保存后清除高亮。
5. **备注保护**：AI 不写入 notes。
6. **创建入口优化**：照片池 + 相机/相册双入口 + 多选确认。
7. **照片池体验**：缩略图可全屏、可删除；与整体 UI 风格一致。
8. **重复档案提示**：手动创建无“选择已有”，改为名称输入后模糊匹配弹窗。
9. **微信/邮箱**：联系人新增微信与检索入口；公司新增邮箱。
10. **二维码解析**：将二维码内容进入预填与补全上下文。

---

## 12) To Do List（执行清单）
1. 名称双语显示逻辑与翻译触发对齐（创建时自动补齐译名）。
2. 强化 AI Summary prompt（产品/参数/竞品/优缺点等）。
3. Tag 合并与去重逻辑。
4. 不确定标记显示/清理逻辑。
5. AI 禁止写入备注。
6. 创建页相机/相册双入口与多选确认。
7. 添加模式照片池交互 + 上限 10 张。
8. 手动创建重复档案提示。
9. 微信字段与检索入口、公司邮箱字段。
10. 二维码解析用于预填与补全上下文。
